(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{106:function(e,a,t){},109:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(13),o=t.n(c),i=(t(79),t(43)),l=t(4),s=t(146),u=t(147),m=t(148),d=t(34),p=t(145),b=t(151),f=t(142),g=t(144),E=t(143),v=t(150),h=t(139),w=t(149),O=t(38),y=t(12),N=t(7),k=t(14),j=t(140),x=t(65),C=t.n(x),I=t(66),S=t.n(I),F=t(63),B=t.n(F),z=t(64),R=t.n(z),G=t(57),U=t(141),H=t(61),J=t.n(H),A=t(33),D=t(62),L=t(36),M=Object(L.a)((function(e){return{root:{height:"100%"},toolbar:{paddingRight:24},toolbarIcon:Object(D.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1},title:{flexGrow:1},appBarSpacer:e.mixins.toolbar,content:{},container:{paddingLeft:0,paddingRight:0,paddingBottom:e.spacing(2)},noHeader:{paddingTop:e.spacing(5)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fabGreen:{backgroundColor:"#3fb553"},fabRed:{backgroundColor:"#c74f4f"},nested:{paddingLeft:e.spacing(5)},btnGreen:{backgroundColor:"#3fb553"},btnRed:{backgroundColor:"#c74f4f"}}}));t(106);y.b.add(N.m,N.g),y.b.add(N.c,N.g),y.b.add(N.n,N.g),y.b.add(N.d,N.g),y.b.add(N.o,N.g),y.b.add(N.e,N.g),y.b.add(N.f,N.g),y.b.add(N.j,N.g),y.b.add(N.h,N.g),y.b.add(N.l,N.g),y.b.add(N.b,N.g),y.b.add(N.i,N.g),y.b.add(N.k,N.g),y.b.add(N.a,N.g);var P=function(e){switch(e.img){case"temperature":return r.a.createElement(k.a,{icon:"temperature-high"});case"humidity":return r.a.createElement(k.a,{icon:"tint"});case"fan":return r.a.createElement(k.a,{icon:"fan"});case"window":return r.a.createElement(k.a,{icon:"window-maximize"});case"radiator":return r.a.createElement(k.a,{icon:"fire"});case"hdd":return r.a.createElement(k.a,{icon:"hdd"});case"mem":return r.a.createElement(k.a,{icon:"memory"});case"sys":return r.a.createElement(k.a,{icon:"laptop"});case"settings":return r.a.createElement(k.a,{icon:"sliders-h"});case"dev":return r.a.createElement(k.a,{icon:"bug"});case"group":return r.a.createElement(k.a,{icon:"layer-group"});case"cpu":return r.a.createElement(k.a,{icon:"microchip"});case"electricity":return r.a.createElement(k.a,{icon:"bolt"})}return r.a.createElement(k.a,{icon:"chart-bar"})},T=function(e){return r.a.createElement(v.a,{edge:"end",value:"ON"===e.value,color:"primary",onChange:function(a){fetch("".concat(e.baseUrl,"/object/")+e.oid,{method:"POST",body:a.target.checked?"ON":"OFF"})}})},W=function(e){var a=M();return r.a.createElement(h.a,{variant:"contained",color:"primary",className:"ON"===e.value?a.btnGreen:""},e.label)},K=function(e){return r.a.createElement(d.a,null,e.value,e.unit)},q=function(e){return e.items?e.isOpen?r.a.createElement(R.a,null):r.a.createElement(B.a,null):r.a.createElement("svg",{viewBox:"0 0 24 24"})},$=function(e){var a=M();return"ON"===e.value?r.a.createElement(j.a,{color:"primary","aria-label":"OK",size:"small",className:a.fabGreen},r.a.createElement(C.a,null)):r.a.createElement(j.a,{color:"primary","aria-label":"KO",size:"small",className:a.fabRed},r.a.createElement(S.a,null))},Q=function(e){var a=M();switch(e.type){case"switch":return r.a.createElement(T,e);case"value":return r.a.createElement(K,e);case"state":return r.a.createElement($,e);case"button":return r.a.createElement(W,e);case"timer":var t="OFF"===e.value?"OFF":"ON",n="OFF"!==e.value&&"ON"!==e.value?e.value:"0";return r.a.createElement(U.a,{color:"primary",badgeContent:n},r.a.createElement(h.a,{variant:"contained",color:"primary",className:"ON"===e.value?a.btnGreen:a.btnRed},t));default:return r.a.createElement(r.a.Fragment,null)}},V=function(e){return e.oid&&e.id?e.oid+"-"+e.id:e.label.toLowerCase()},X=function e(a){var t=M(),n=r.a.useState(!1),c=Object(i.a)(n,2),o=c[0],l=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{className:a.className,onClick:function(){l(!o)}},r.a.createElement(f.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(q,{items:a.items,isOpen:o}),r.a.createElement(P,{img:a.img}))),r.a.createElement(E.a,{primary:a.label,secondary:a.lastupdate?"Updated: "+a.lastupdate:""}),r.a.createElement(g.a,null,r.a.createElement(Q,a))),a.items&&r.a.createElement(G.a,{in:o,timeout:"auto",unmountOnExit:!0},r.a.createElement(p.a,{component:"div",disablePadding:!0},a.items.map((function(n){return r.a.createElement(e,{key:V(n),className:t.nested,oid:n.oid,type:n.type,img:n.img,label:n.label,value:n.value,unit:n.unit,lastupdate:n.lastupdate,items:n.items,baseUrl:a.baseUrl})})))))},Y=Object(O.withSnackbar)((function(e){var a=M(),t=Object(n.useState)({Items:Array()}),c=Object(i.a)(t,2),o=c[0],b=c[1],f=Object(n.useState)(0),g=Object(i.a)(f,2),E=g[0],v=g[1],h=Object(n.useRef)(null),O=A.parse(window.location.search).address,y=A.parse(window.location.search).username,N=A.parse(window.location.search).password,k=N?"".concat(y,":").concat(N,"@"):"",j="http://".concat(O||window.location.host),x=j.replace("http://","ws://".concat(k)),C="native"===A.parse(window.location.search).mode,I=Object(n.useCallback)((function(a,t){e.enqueueSnackbar(a,{variant:t,autoHideDuration:1e3,anchorOrigin:{vertical:"bottom",horizontal:"right"}})}),[e]),S=Object(n.useCallback)((function(){var e=new Headers;if(N){var a="".concat(y,":").concat(N);e.set("Authorization","Basic "+btoa(a))}fetch("".concat(j,"/?type=json"),{headers:e}).then((function(e){return e.json().then((function(e){I("Data retrieve succesfully","info"),b(e)}))})).catch((function(e){I("Unable to load or parse topology data ".concat(e),"error"),setTimeout(S,2e3)}))}),[I,j]);return Object(n.useEffect)((function(){S()}),[e,S,h]),r.a.createElement("div",{className:a.root},r.a.createElement(J.a,{ref:h,url:"".concat(x,"/ws"),onOpen:function(){if(I("Connected to events","success"),!E){var e=window.setInterval((function(){h.current.sendMessage(JSON.stringify("keepalive"))}),2e3);v(e)}},onMessage:function(e){!function e(a,t){t.forEach((function(n,r){n.id===a.id&&n.oid===a.oid&&(t[r]=a),n.items&&e(a,n.items)}))}(JSON.parse(e),o.Items),b({Items:o.Items})},onClose:function(){I("Event connection lost","error"),window.clearInterval(E),v(0)},reconnectIntervalInMilliSeconds:5e3}),r.a.createElement(s.a,null),!C&&r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{position:"fixed",className:a.appBar},r.a.createElement(m.a,{className:a.toolbar,variant:"dense"},r.a.createElement(d.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:a.title},"H.A.S.C.")))),r.a.createElement(w.a,{className:Object(l.a)(a.container,!C&&a.noHeader)},r.a.createElement(p.a,{className:a.content},o.Items.map((function(e){return r.a.createElement(X,{key:V(e),oid:e.oid,type:e.type,img:e.img,label:e.label,value:e.value,unit:e.unit,lastupdate:e.lastupdate,items:e.items,baseUrl:j})})))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(O.SnackbarProvider,{maxSnack:1},r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},74:function(e,a,t){e.exports=t(109)},79:function(e,a,t){}},[[74,1,2]]]);
//# sourceMappingURL=main.3baa8ce1.chunk.js.map